[{"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\index.js":"1","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\App.js":"2","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\serviceWorker.js":"3","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\app\\store.js":"4","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\Calendar.jsx":"5","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\api.js":"6","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\calendarSlice.js":"7","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\helpers.js":"8","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\consts.js":"9","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\daySelector\\DaySelector.jsx":"10","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\dayCard\\DayCard.jsx":"11","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\holidayTypeIndicator\\HolidayTypeIndicator.jsx":"12"},{"size":644,"mtime":499162500000,"results":"13","hashOfConfig":"14"},{"size":239,"mtime":1611943232686,"results":"15","hashOfConfig":"14"},{"size":5141,"mtime":499162500000,"results":"16","hashOfConfig":"14"},{"size":213,"mtime":1611928576230,"results":"17","hashOfConfig":"14"},{"size":3449,"mtime":1611953680891,"results":"18","hashOfConfig":"14"},{"size":574,"mtime":1611927866089,"results":"19","hashOfConfig":"14"},{"size":1520,"mtime":1611942941195,"results":"20","hashOfConfig":"14"},{"size":1817,"mtime":1611953043370,"results":"21","hashOfConfig":"14"},{"size":244,"mtime":1611939112287,"results":"22","hashOfConfig":"14"},{"size":766,"mtime":1611953305681,"results":"23","hashOfConfig":"14"},{"size":718,"mtime":1612023681663,"results":"24","hashOfConfig":"14"},{"size":730,"mtime":1612024258271,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"ab9jjf",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\index.js",[],["52","53"],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\App.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\serviceWorker.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\app\\store.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\Calendar.jsx",["54"],"import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n  selectLoading,\r\n  requestHolidays,\r\n  selectHolidays,\r\n  selectEarliestDateFetched,\r\n  selectLatestDateFetched,\r\n} from \"./calendarSlice\";\r\nimport {\r\n  findRequestPeriod,\r\n  findWeekRangeByDate,\r\n  updateStartOfWeek,\r\n} from \"utils/helpers\";\r\nimport { DaysEnum, REQUEST_DATE_FORMAT } from \"utils/consts\";\r\n\r\nimport styles from \"./Calendar.module.css\";\r\nimport DaySelector from \"./daySelector/DaySelector\";\r\nimport DayCard from \"./dayCard/DayCard\";\r\n\r\nconst Calendar = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const loading = useSelector(selectLoading);\r\n  const holidays = useSelector(selectHolidays);\r\n  const earliestDateFetched = useSelector(selectEarliestDateFetched);\r\n  const latestDateFetched = useSelector(selectLatestDateFetched);\r\n\r\n  const [displayStartDay, setDisplayStartDay] = useState(DaysEnum.monday);\r\n  const [displayRange, setDisplayRange] = useState(findWeekRangeByDate());\r\n\r\n  const updateHolidays = () => {\r\n    const displayFromDate = displayRange[0];\r\n    const displayToDate = displayRange[displayRange.length - 1];\r\n\r\n    // Check if holidays need to be fetcehd from server\r\n    // for the requested week\r\n    if (\r\n      earliestDateFetched &&\r\n      latestDateFetched &&\r\n      moment(earliestDateFetched).isSameOrBefore(moment(displayFromDate)) &\r\n        moment(latestDateFetched).isSameOrAfter(moment(displayToDate))\r\n    ) {\r\n      return;\r\n    } else {\r\n      // Fetch as far as possible\r\n      const { startDate, endDate } = findRequestPeriod(\r\n        displayFromDate,\r\n        displayToDate,\r\n        earliestDateFetched,\r\n        latestDateFetched\r\n      );\r\n\r\n      dispatch(requestHolidays(startDate, endDate));\r\n    }\r\n  };\r\n\r\n  const handleDayChanged = (newDay) => {\r\n    setDisplayStartDay(newDay);\r\n    updateStartOfWeek(newDay);\r\n    setDisplayRange(findWeekRangeByDate(displayRange.from));\r\n  };\r\n\r\n  const handleWeekChanged = (amount) => {\r\n    const now = displayRange[0];\r\n    const newDate =\r\n      amount > 0\r\n        ? moment(now).add(amount, \"week\")\r\n        : moment(now).subtract(amount * -1, \"week\");\r\n    setDisplayRange(findWeekRangeByDate(newDate));\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateHolidays();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [displayRange]);\r\n\r\n  useEffect(() => {\r\n    handleDayChanged(displayStartDay);\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      {loading ? (\r\n        <div>Loading</div>\r\n      ) : (\r\n        <Fragment>\r\n          <div className={styles.actionBar}>\r\n            <button onClick={() => handleWeekChanged(-1)}>Previous week</button>\r\n            <button onClick={() => handleWeekChanged(1)}>Next week</button>\r\n            <span className={styles.daySelect}>\r\n              <DaySelector\r\n                selectedValue={displayStartDay}\r\n                onDaySelect={handleDayChanged}\r\n              ></DaySelector>\r\n            </span>\r\n          </div>\r\n\r\n          <section className={styles.weekGrid}>\r\n            {displayRange.map((date, i) => (\r\n              <DayCard\r\n                date={date}\r\n                holidays={holidays[date.format(REQUEST_DATE_FORMAT)]}\r\n                key={i}\r\n              ></DayCard>\r\n            ))}\r\n          </section>\r\n        </Fragment>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Calendar;\r\n","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\api.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\calendarSlice.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\helpers.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\consts.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\daySelector\\DaySelector.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\dayCard\\DayCard.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\holidayTypeIndicator\\HolidayTypeIndicator.jsx",["55"],{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":82,"column":6,"nodeType":"62","endLine":82,"endColumn":8,"suggestions":"63"},{"ruleId":"64","severity":1,"message":"65","line":1,"column":17,"nodeType":"66","messageId":"67","endLine":1,"endColumn":25},"no-native-reassign",["68"],"no-negated-in-lhs",["69"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'displayStartDay' and 'handleDayChanged'. Either include them or remove the dependency array.","ArrayExpression",["70"],"no-unused-vars","'Fragment' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"71","fix":"72"},"Update the dependencies array to be: [displayStartDay, handleDayChanged]",{"range":"73","text":"74"},[2485,2487],"[displayStartDay, handleDayChanged]"]