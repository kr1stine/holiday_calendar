[{"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\index.js":"1","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\App.js":"2","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\serviceWorker.js":"3","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\Calendar.jsx":"4","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\api.js":"5","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\calendarSlice.js":"6","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\helpers.js":"7","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\consts.js":"8","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\daySelector\\DaySelector.jsx":"9","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\dayCard\\DayCard.jsx":"10","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\holidayTypeIndicator\\HolidayTypeIndicator.jsx":"11","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\weekButton\\WeekButton.jsx":"12","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\errorMessage\\ErrorMessage.jsx":"13","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\redux\\store.js":"14"},{"size":646,"mtime":1612033896417,"results":"15","hashOfConfig":"16"},{"size":239,"mtime":1611943232686,"results":"17","hashOfConfig":"16"},{"size":5141,"mtime":499162500000,"results":"18","hashOfConfig":"16"},{"size":4015,"mtime":1612032815516,"results":"19","hashOfConfig":"16"},{"size":574,"mtime":1612032848798,"results":"20","hashOfConfig":"16"},{"size":2025,"mtime":1612092512804,"results":"21","hashOfConfig":"16"},{"size":1817,"mtime":1611953043370,"results":"22","hashOfConfig":"16"},{"size":244,"mtime":1611939112287,"results":"23","hashOfConfig":"16"},{"size":766,"mtime":1611953305681,"results":"24","hashOfConfig":"16"},{"size":731,"mtime":1612089813628,"results":"25","hashOfConfig":"16"},{"size":716,"mtime":1612031963137,"results":"26","hashOfConfig":"16"},{"size":746,"mtime":1612032052945,"results":"27","hashOfConfig":"16"},{"size":437,"mtime":1612032823878,"results":"28","hashOfConfig":"16"},{"size":213,"mtime":1611928576230,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"ab9jjf",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"34"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\index.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\App.js",[],["61","62"],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\serviceWorker.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\Calendar.jsx",["63"],"import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport moment from \"moment\";\r\n\r\nimport DaySelector from \"./daySelector/DaySelector\";\r\nimport DayCard from \"./dayCard/DayCard\";\r\nimport WeekButton from \"./weekButton/WeekButton\";\r\n\r\nimport {\r\n  selectLoading,\r\n  selectError,\r\n  requestHolidays,\r\n  selectHolidays,\r\n  selectEarliestDateFetched,\r\n  selectLatestDateFetched,\r\n} from \"./calendarSlice\";\r\nimport {\r\n  findRequestPeriod,\r\n  findWeekRangeByDate,\r\n  updateStartOfWeek,\r\n} from \"utils/helpers\";\r\nimport { DaysEnum, REQUEST_DATE_FORMAT } from \"utils/consts\";\r\n\r\nimport styles from \"./Calendar.module.css\";\r\nimport ErrorMessage from \"./errorMessage/ErrorMessage\";\r\n\r\nconst Calendar = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const loading = useSelector(selectLoading);\r\n  const error = useSelector(selectError);\r\n  const holidays = useSelector(selectHolidays);\r\n  const earliestDateFetched = useSelector(selectEarliestDateFetched);\r\n  const latestDateFetched = useSelector(selectLatestDateFetched);\r\n\r\n  const [displayStartDay, setDisplayStartDay] = useState(DaysEnum.monday);\r\n  const [displayRange, setDisplayRange] = useState(findWeekRangeByDate());\r\n\r\n  const updateHolidays = () => {\r\n    const displayFromDate = displayRange[0];\r\n    const displayToDate = displayRange[displayRange.length - 1];\r\n\r\n    // Check if holidays need to be fetcehd from server\r\n    // for the requested week\r\n    if (\r\n      earliestDateFetched &&\r\n      latestDateFetched &&\r\n      moment(earliestDateFetched).isSameOrBefore(moment(displayFromDate)) &\r\n        moment(latestDateFetched).isSameOrAfter(moment(displayToDate))\r\n    ) {\r\n      return;\r\n    } else {\r\n      // Fetch as far as possible\r\n      const { startDate, endDate } = findRequestPeriod(\r\n        displayFromDate,\r\n        displayToDate,\r\n        earliestDateFetched,\r\n        latestDateFetched\r\n      );\r\n\r\n      dispatch(requestHolidays(startDate, endDate));\r\n    }\r\n  };\r\n\r\n  const handleDayChanged = (newDay) => {\r\n    setDisplayStartDay(newDay);\r\n    updateStartOfWeek(newDay);\r\n    setDisplayRange(findWeekRangeByDate(displayRange.from));\r\n  };\r\n\r\n  const handleWeekChanged = (amount) => {\r\n    const now = displayRange[0];\r\n    const newDate =\r\n      amount > 0\r\n        ? moment(now).add(amount, \"week\")\r\n        : moment(now).subtract(amount * -1, \"week\");\r\n    setDisplayRange(findWeekRangeByDate(newDate));\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateHolidays();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [displayRange]);\r\n\r\n  useEffect(() => {\r\n    handleDayChanged(displayStartDay);\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      {loading ? (\r\n        <div>Loading</div>\r\n      ) : error ? (\r\n        <ErrorMessage></ErrorMessage>\r\n      ) : (\r\n        <Fragment>\r\n          <div className={styles.actionBar}>\r\n            <div>\r\n              <div className={styles.title}>Estonian Holiday Calendar</div>\r\n              <span className={styles.daySelect}>\r\n                <DaySelector\r\n                  selectedValue={displayStartDay}\r\n                  onDaySelect={handleDayChanged}\r\n                ></DaySelector>\r\n              </span>\r\n            </div>\r\n            <div className={styles.buttons}>\r\n              <WeekButton\r\n                direction={\"backward\"}\r\n                onClick={() => handleWeekChanged(-1)}\r\n              ></WeekButton>\r\n              <WeekButton\r\n                direction={\"forward\"}\r\n                onClick={() => handleWeekChanged(1)}\r\n              ></WeekButton>\r\n            </div>\r\n          </div>\r\n\r\n          <section className={styles.weekGrid}>\r\n            {displayRange.map((date, i) => (\r\n              <DayCard\r\n                date={date}\r\n                holidays={holidays[date.format(REQUEST_DATE_FORMAT)]}\r\n                key={i}\r\n              ></DayCard>\r\n            ))}\r\n          </section>\r\n        </Fragment>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Calendar;\r\n","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\api.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\calendarSlice.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\helpers.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\utils\\consts.js",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\daySelector\\DaySelector.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\dayCard\\DayCard.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\holidayTypeIndicator\\HolidayTypeIndicator.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\weekButton\\WeekButton.jsx",[],"C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\components\\calendar\\errorMessage\\ErrorMessage.jsx",["64"],"import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectErrorReason } from \"../calendarSlice\";\r\n\r\nimport styles from \"./ErrorMessage.module.css\";\r\n\r\nconst ErrorMessage = () => {\r\n  const errorReason = useSelector(selectErrorReason);\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      Oh no! Something went wrong on our side, please try again.\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","C:\\Users\\kr1stine\\Documents\\Tööpakkumised2021\\holiday-calendar\\src\\redux\\store.js",[],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":87,"column":6,"nodeType":"71","endLine":87,"endColumn":8,"suggestions":"72"},{"ruleId":"73","severity":1,"message":"74","line":8,"column":9,"nodeType":"75","messageId":"76","endLine":8,"endColumn":20},"no-native-reassign",["77"],"no-negated-in-lhs",["78"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'displayStartDay' and 'handleDayChanged'. Either include them or remove the dependency array.","ArrayExpression",["79"],"no-unused-vars","'errorReason' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"80","fix":"81"},"Update the dependencies array to be: [displayStartDay, handleDayChanged]",{"range":"82","text":"83"},[2654,2656],"[displayStartDay, handleDayChanged]"]